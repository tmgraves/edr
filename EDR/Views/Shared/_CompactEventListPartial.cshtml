@model IEnumerable<EDR.Models.Event>
@using EDR.Utilities
@using EDR.Models

@if (Model.Count() != 0)
{
    int rowNo=0;
    foreach (var item in Model)
    {
        <a class="btn btn-default" style="width: 100%; text-align: left;" href="@Url.Action("Details", "Event", new { id = item.Id, eventType = "Class" } )">
            <div style="width: 100%;">
                <strong>@(rowNo+=1). @item.Name <br />@@@item.Place.Name</strong>
                <br />
                @if (item.Recurring)
                {
                    @ApplicationUtility.GetNextDate(item.StartDate, item.Frequency, (int)item.Interval, item.Day).ToString("ddd, MMM dd, yyyy")
                    @:(
                    @item.StartDate.ToString("%h:mm tt")@:~@item.StartDate.AddMinutes(item.Duration).ToString("%h:mm tt")
                    @:)
                    <br />
                }
                else
                {
                    @item.StartDate.ToString("ddd, MMM dd, yyyy")
                    @:(
                    @item.StartDate.ToString("%h:mm tt")@:~@item.StartDate.AddMinutes(item.Duration).ToString("%h:mm tt")
                    @:)
                    <br />
                }
                @if (item is Class)
                {
                    if (((Class)item).Teachers != null)
                    {
                        foreach (var t in ((Class)item).Teachers)
                        {
                            @t.ApplicationUser.FullName
                        }
                        <br />
                    }
                }
                else if (item is Workshop)
                {
                    if (((Workshop)item).Teachers != null)
                    {
                        foreach (var t in ((Workshop)item).Teachers)
                        {
                            @t.ApplicationUser.FullName
                        }
                    }<br />
                }
                @if (item.Place.Address != null && item.Place.Address != "")
                {
                    @item.Place.Address@:,
            }
                @if (item.Place.Address2 != null && item.Place.Address2 != "")
                {
                    @item.Place.Address2@:,
            }
                @if (item.Place.City != null && item.Place.City != "")
                {
                    @item.Place.City@:,
            }
                @if (item.Place.State != null)
                {
                    @item.Place.State
                }
                @item.Place.Zip
            </div>
        </a>
    }
}