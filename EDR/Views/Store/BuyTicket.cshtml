@model EDR.Models.ViewModels.OrderViewModel

@{
    ViewBag.Title = "BuyTicket";
}

<h2>Order Detail</h2>

@using (Html.BeginForm(null, null, FormMethod.Post, new { @class = "form-horizontal" }))
{
    @Html.HiddenFor(m => m.EventInstanceId)
    @Html.HiddenFor(m => m.Type)
    @Html.HiddenFor(m => m.EventId)
    @Html.HiddenFor(m => m.SchoolId)
    @*@Html.HiddenFor(m => m.Ticket.Id)
    @Html.HiddenFor(m => m.Ticket.Quantity)
    @Html.HiddenFor(m => m.Ticket.Price)
    <div class="form-group">
        <label for="inputEmail3" class="col-sm-2 control-label">Ticket:</label>
        <div class="col-sm-10">
            <div class="col-lg-2 col-md-2 col-sm-4 col-xs-4 text-right">
                <span class="control-label">@(String.Format("{0:G0}", Model.Ticket.Quantity) + " @ " + String.Format("{0:C}", Model.Ticket.Price))</span>
            </div>
        </div>
    </div>*@
    <div class="form-group">
        <label for="inputPassword3" class="col-sm-2 control-label">Pick a Ticket:</label>
        <div class="col-sm-10">
            <div class="col-lg-3 col-md-3 col-sm-4 col-xs-4">
                @Html.DropDownListFor(m => m.TicketId, Model.Tickets.OrderBy(t => t.Quantity).Select(t => new SelectListItem() { Value = t.Id.ToString(), Text = String.Format("{0:N0}", t.Quantity) + " @ " + String.Format("{0:C0}", t.Price) }).ToList(), "-- Select a Ticket --", new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.TicketId, "", new { @class = "text-danger" })
            </div>
        </div>
    </div>
    <div class="form-group">
        <label for="inputPassword3" class="col-sm-2 control-label">Quantity:</label>
        <div class="col-sm-10">
            <div class="col-lg-2 col-md-2 col-sm-4 col-xs-4">
                @Html.TextBoxFor(t => t.Quantity, htmlAttributes: new { @class = "form-control text-right", @type = "number", @min = "1" })
            </div>
        </div>
    </div>
    <h2>Payment Info</h2>
    <div class="form-group">
        <label for="inputPassword3" class="col-sm-2 control-label">Card Number</label>
        <div class="col-sm-10">
            <input id="ccNo" type="text" size="20" value="" autocomplete="off" required class="form-control" />
        </div>
    </div>
    <div class="form-group">
        <label for="inputPassword3" class="col-sm-2 control-label">Expiration Date (MM/YYYY)</label>
        <div class="col-sm-10">
            <div class="col-lg-1">
                <input type="text" size="2" id="expMonth" required class="form-control" />
            </div>
            <span class="col-lg-1"> / </span>
            <div class="col-lg-1">
                <input type="text" size="2" id="expYear" required class="form-control" />
            </div>
        </div>
    </div>
    <div class="form-group">
        <label for="inputPassword3" class="col-sm-2 control-label">CVC</label>
        <div class="col-sm-10">
            <input id="cvv" size="4" type="text" value="" autocomplete="off" required class="form-control" />
        </div>
    </div>
    <input id="token" name="token" type="hidden" value="">

    <input type="submit" value="Submit Order" />
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}